package card

import "github.com/ohhfishal/resume-wizard/db"

// TODO: Make a feature flag
const MAX_BASE_RESUMES = 3

templ ResumeCard(resumes []db.Resume) {
	{{
	// TODO: Make a feature flag based on the user
	var disabled = len(resumes) >= MAX_BASE_RESUMES
	if disabled {
		resumes = resumes[:MAX_BASE_RESUMES]
	}
	}}
	@Card(CardProps{}) {
		<div class="card-header">
			<h3>{ "Base Resumes" }</h3>
			<div class="card-meta">
				<span class="count-badge">{ len(resumes) } Resumes</span>
				if disabled {
					<div class="tooltip-container">
						// TODO: Have this not redirect the whole page
						<button href="/base" class="button btn-add" hx-boost="true" disabled>+ Add New </button>
						<span class="tooltip-text">Reached max resume limit of { MAX_BASE_RESUMES }</span>
					</div>
				} else {
					<a href="/base" class="button btn-add" hx-boost="true">+ Add New </a>
				}
			</div>
		</div>
		<div class="resume-list">
			for _, resume := range resumes {
				@ResumeItem(resume)
			}
		</div>
	}
}

templ ResumeItem(resume db.Resume) {
	<div class="resume-item">
		<div class="resume-info">
			<h4>{ resume.Name }</h4>
			<p>Uploaded PLACEHOLDER â€¢ Last used PLACEHOLDER</p>
		</div>
		<div class="resume-actions">
			<button class="btn-small">Tailor</button>
			<button class="btn-small">Edit</button>
			<button class="btn-small">Delete</button>
		</div>
	</div>
}
